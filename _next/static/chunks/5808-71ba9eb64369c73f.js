"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5808],{45808:function(t,e,r){r.d(e,{DC:function(){return m},ue:function(){return g},vj:function(){return q}});var i=r(5853),s=r(83592),o=r(36628),a=r(77473),n=r(36517),u=r(85292),l=r(86626),c=r(89817),h=r(19821),p=r(69090),y=r(45963),f=r(77828),v=r(20311),b=Object.assign,d=Object.hasOwnProperty,g=function(t){function e(e){var r=e.queryManager,s=e.queryInfo,o=e.options,a=t.call(this,function(t){try{var e=t._subscription._observer;e&&!e.error&&(e.error=P)}catch(t){}var r=!a.observers.size;a.observers.add(t);var i=a.last;return i&&i.error?t.error&&t.error(i.error):i&&i.result&&t.next&&t.next(a.maskResult(i.result)),r&&a.reobserve().catch(function(){}),function(){a.observers.delete(t)&&!a.observers.size&&a.tearDownQuery()}})||this;a.observers=new Set,a.subscriptions=new Set,a.queryInfo=s,a.queryManager=r,a.waitForOwnResult=w(o.fetchPolicy),a.isTornDown=!1,a.subscribeToMore=a.subscribeToMore.bind(a),a.maskResult=a.maskResult.bind(a);var u=r.defaultOptions.watchQuery,l=(void 0===u?{}:u).fetchPolicy,c=void 0===l?"cache-first":l,h=o.fetchPolicy,p=void 0===h?c:h,y=o.initialFetchPolicy,f=void 0===y?"standby"===p?c:p:y;a.options=(0,i.pi)((0,i.pi)({},o),{initialFetchPolicy:f,fetchPolicy:p}),a.queryId=s.queryId||r.generateQueryId();var v=(0,n.$H)(a.query);return a.queryName=v&&v.name&&v.name.value,a}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return this.lastQuery||this.options.query},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return new Promise(function(e,r){var i={next:function(r){e(r),t.observers.delete(i),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){s.unsubscribe()},0)},error:r},s=t.subscribe(i)})},e.prototype.resetDiff=function(){this.queryInfo.resetDiff()},e.prototype.getCurrentFullResult=function(t){void 0===t&&(t=!0);var e=this.getLastResult(!0),r=this.queryInfo.networkStatus||e&&e.networkStatus||a.Ie.ready,s=(0,i.pi)((0,i.pi)({},e),{loading:(0,a.Oj)(r),networkStatus:r}),n=this.options.fetchPolicy,u=void 0===n?"cache-first":n;if(w(u)||this.queryManager.getDocumentInfo(this.query).hasForcedResolvers);else if(this.waitForOwnResult)this.queryInfo.updateWatch();else{var l=this.queryInfo.getDiff();(l.complete||this.options.returnPartialData)&&(s.data=l.result),(0,o.D)(s.data,{})&&(s.data=void 0),l.complete?(delete s.partial,l.complete&&s.networkStatus===a.Ie.loading&&("cache-first"===u||"cache-only"===u)&&(s.networkStatus=a.Ie.ready,s.loading=!1)):s.partial=!0,!1===globalThis.__DEV__||l.complete||this.options.partialRefetch||s.loading||s.data||s.error||m(l.missing)}return t&&this.updateLastResult(s),s},e.prototype.getCurrentResult=function(t){return void 0===t&&(t=!0),this.maskResult(this.getCurrentFullResult(t))},e.prototype.isDifferentFromLastResult=function(t,e){if(!this.last)return!0;var r=this.queryManager.getDocumentInfo(this.query),i=this.queryManager.dataMasking,s=i?r.nonReactiveQuery:this.query;return(i||r.hasNonreactiveDirective?!(0,v.W)(s,this.last.result,t,this.variables):!(0,o.D)(this.last.result,t))||e&&!(0,o.D)(this.last.variables,e)},e.prototype.getLast=function(t,e){var r=this.last;if(r&&r[t]&&(!e||(0,o.D)(r.variables,this.variables)))return r[t]},e.prototype.getLastResult=function(t){return this.getLast("result",t)},e.prototype.getLastError=function(t){return this.getLast("error",t)},e.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var e,r={pollInterval:0},u=this.options.fetchPolicy;if("cache-and-network"===u?r.fetchPolicy=u:"no-cache"===u?r.fetchPolicy="no-cache":r.fetchPolicy="network-only",!1!==globalThis.__DEV__&&t&&d.call(t,"variables")){var l=(0,n.iW)(this.query),c=l.variableDefinitions;c&&c.some(function(t){return"variables"===t.variable.name.value})||!1===globalThis.__DEV__||s.kG.warn(21,t,(null===(e=l.name)||void 0===e?void 0:e.value)||l)}return t&&!(0,o.D)(this.options.variables,t)&&(r.variables=this.options.variables=(0,i.pi)((0,i.pi)({},this.options.variables),t)),this.queryInfo.resetLastWrite(),this.reobserve(r,a.Ie.refetch)},e.prototype.fetchMore=function(t){var e=this,r=(0,i.pi)((0,i.pi)({},t.query?t:(0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)({},this.options),{query:this.options.query}),t),{variables:(0,i.pi)((0,i.pi)({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"});r.query=this.transformDocument(r.query);var o=this.queryManager.generateQueryId();this.lastQuery=t.query?this.transformDocument(this.options.query):r.query;var n=this.queryInfo,u=n.networkStatus;n.networkStatus=a.Ie.fetchMore,r.notifyOnNetworkStatusChange&&this.observe();var l=new Set,c=null==t?void 0:t.updateQuery,h="no-cache"!==this.options.fetchPolicy;return h||(0,s.kG)(c,22),this.queryManager.fetchQuery(o,r,a.Ie.fetchMore).then(function(s){if(e.queryManager.removeQuery(o),n.networkStatus===a.Ie.fetchMore&&(n.networkStatus=u),h)e.queryManager.cache.batch({update:function(i){var o=t.updateQuery;o?i.updateQuery({query:e.query,variables:e.variables,returnPartialData:!0,optimistic:!1},function(t){return o(t,{fetchMoreResult:s.data,variables:r.variables})}):i.writeQuery({query:r.query,variables:r.variables,data:s.data})},onWatchUpdated:function(t){l.add(t.query)}});else{var p=e.getLast("result"),y=c(p.data,{fetchMoreResult:s.data,variables:r.variables});e.reportResult((0,i.pi)((0,i.pi)({},p),{data:y}),e.variables)}return e.maskResult(s)}).finally(function(){h&&!l.has(e.query)&&q(e)})},e.prototype.subscribeToMore=function(t){var e=this,r=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(r){var i=t.updateQuery;i&&e.updateQuery(function(t,e){return i(t,{subscriptionData:r,variables:e.variables})})},error:function(e){if(t.onError){t.onError(e);return}!1!==globalThis.__DEV__&&s.kG.error(23,e)}});return this.subscriptions.add(r),function(){e.subscriptions.delete(r)&&r.unsubscribe()}},e.prototype.setOptions=function(t){return this.reobserve(t)},e.prototype.silentSetOptions=function(t){var e=(0,u.o)(this.options,t||{});b(this.options,e)},e.prototype.setVariables=function(t){return(0,o.D)(this.variables,t)?this.observers.size?this.result():Promise.resolve():(this.options.variables=t,this.observers.size)?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:t},a.Ie.setVariables):Promise.resolve()},e.prototype.updateQuery=function(t){var e=this.queryManager,r=t(e.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});r&&(e.cache.writeQuery({query:this.options.query,data:r,variables:this.variables}),e.broadcastQueries())},e.prototype.startPolling=function(t){this.options.pollInterval=t,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.applyNextFetchPolicy=function(t,e){if(e.nextFetchPolicy){var r=e.fetchPolicy,i=void 0===r?"cache-first":r,s=e.initialFetchPolicy,o=void 0===s?i:s;"standby"===i||("function"==typeof e.nextFetchPolicy?e.fetchPolicy=e.nextFetchPolicy(i,{reason:t,options:e,observable:this,initialFetchPolicy:o}):"variables-changed"===t?e.fetchPolicy=o:e.fetchPolicy=e.nextFetchPolicy)}return e.fetchPolicy},e.prototype.fetch=function(t,e,r){return this.queryManager.setObservableQuery(this),this.queryManager.fetchConcastWithInfo(this.queryId,t,e,r)},e.prototype.updatePolling=function(){var t=this;if(!this.queryManager.ssrMode){var e=this.pollingInfo,r=this.options.pollInterval;if(!r||!this.hasObservers()){e&&(clearTimeout(e.timeout),delete this.pollingInfo);return}if(!e||e.interval!==r){(0,s.kG)(r,24),(e||(this.pollingInfo={})).interval=r;var i=function(){var e,r;t.pollingInfo&&((0,a.Oj)(t.queryInfo.networkStatus)||(null===(r=(e=t.options).skipPollAttempt)||void 0===r?void 0:r.call(e))?o():t.reobserve({fetchPolicy:"no-cache"===t.options.initialFetchPolicy?"no-cache":"network-only"},a.Ie.poll).then(o,o))},o=function(){var e=t.pollingInfo;e&&(clearTimeout(e.timeout),e.timeout=setTimeout(i,e.interval))};o()}}},e.prototype.updateLastResult=function(t,e){void 0===e&&(e=this.variables);var r=this.getLastError();return r&&this.last&&!(0,o.D)(e,this.last.variables)&&(r=void 0),this.last=(0,i.pi)({result:this.queryManager.assumeImmutableResults?t:(0,l.X)(t),variables:e},r?{error:r}:null)},e.prototype.reobserveAsConcast=function(t,e){var r=this;this.isTornDown=!1;var s=e===a.Ie.refetch||e===a.Ie.fetchMore||e===a.Ie.poll,n=this.options.variables,l=this.options.fetchPolicy,c=(0,u.o)(this.options,t||{}),h=s?c:b(this.options,c),p=this.transformDocument(h.query);this.lastQuery=p,!s&&(this.updatePolling(),t&&t.variables&&!(0,o.D)(t.variables,n)&&"standby"!==h.fetchPolicy&&(h.fetchPolicy===l||"function"==typeof h.nextFetchPolicy)&&(this.applyNextFetchPolicy("variables-changed",h),void 0===e&&(e=a.Ie.setVariables))),this.waitForOwnResult&&(this.waitForOwnResult=w(h.fetchPolicy));var y=function(){r.concast===g&&(r.waitForOwnResult=!1)},v=h.variables&&(0,i.pi)({},h.variables),d=this.fetch(h,e,p),g=d.concast,q=d.fromLink,P={next:function(t){(0,o.D)(r.variables,v)&&(y(),r.reportResult(t,v))},error:function(t){(0,o.D)(r.variables,v)&&((0,f.MS)(t)||(t=new f.cA({networkError:t})),y(),r.reportError(t,v))}};return s||!q&&this.concast||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=g,this.observer=P),g.addObserver(P),g},e.prototype.reobserve=function(t,e){return(0,c.c)(this.reobserveAsConcast(t,e).promise.then(this.maskResult))},e.prototype.resubscribeAfterError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.last;this.resetLastResults();var i=this.subscribe.apply(this,t);return this.last=r,i},e.prototype.observe=function(){this.reportResult(this.getCurrentFullResult(!1),this.variables)},e.prototype.reportResult=function(t,e){var r=this.getLastError(),i=this.isDifferentFromLastResult(t,e);(r||!t.partial||this.options.returnPartialData)&&this.updateLastResult(t,e),(r||i)&&(0,h.p)(this.observers,"next",this.maskResult(t))},e.prototype.reportError=function(t,e){var r=(0,i.pi)((0,i.pi)({},this.getLastResult()),{error:t,errors:t.graphQLErrors,networkStatus:a.Ie.error,loading:!1});this.updateLastResult(r,e),(0,h.p)(this.observers,"error",this.last.error=t)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e.prototype.transformDocument=function(t){return this.queryManager.transform(t)},e.prototype.maskResult=function(t){return t&&"data"in t?(0,i.pi)((0,i.pi)({},t),{data:this.queryManager.maskOperation({document:this.query,data:t.data,fetchPolicy:this.options.fetchPolicy,id:this.queryId})}):t},e}(p.y);function q(t){var e=t.options,r=e.fetchPolicy,i=e.nextFetchPolicy;return"cache-and-network"===r||"network-only"===r?t.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(t,e){return(this.nextFetchPolicy=i,"function"==typeof this.nextFetchPolicy)?this.nextFetchPolicy(t,e):r}}):t.reobserve()}function P(t){!1!==globalThis.__DEV__&&s.kG.error(25,t.message,t.stack)}function m(t){!1!==globalThis.__DEV__&&t&&!1!==globalThis.__DEV__&&s.kG.debug(26,t)}function w(t){return"network-only"===t||"no-cache"===t||"standby"===t}(0,y.D)(g)}}]);