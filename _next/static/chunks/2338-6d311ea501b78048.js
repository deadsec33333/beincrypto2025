"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2338],{2338:function(e,t,n){var o=n(1119),l=n(83145),u=n(11993),i=n(31686),r=n(26365),a=n(6989),c=n(41154),v=n(84e3);n(46304);var s=n(2265),f=n(51622),d=n(16457),p=n(12205),m=n(29968),b=n(35651),h=n(84265),Z=n(24476),S=n(18182),g=n(38275),V=n(57579),y=n(84832),C=n(97082);n(74021);var k=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],O=["inputValue"],x=s.forwardRef(function(e,t){var n=e.id,d=e.mode,p=e.prefixCls,x=e.backfill,M=e.fieldNames,I=e.inputValue,w=e.searchValue,E=e.onSearch,A=e.autoClearSearchValue,D=void 0===A||A,N=e.onSelect,P=e.onDeselect,H=e.dropdownMatchSelectWidth,R=void 0===H||H,_=e.filterOption,F=e.filterSort,L=e.optionFilterProp,W=e.optionLabelProp,U=e.options,j=e.optionRender,q=e.children,G=e.defaultActiveFirstOption,J=e.menuItemSelectedIcon,$=e.virtual,z=e.direction,B=e.listHeight,K=void 0===B?200:B,Q=e.listItemHeight,T=void 0===Q?20:Q,X=e.labelRender,Y=e.value,ee=e.defaultValue,et=e.labelInValue,en=e.onChange,eo=e.maxCount,el=(0,a.Z)(e,k),eu=(0,S.ZP)(n),ei=(0,f.E)(d),er=!!(!U&&q),ea=s.useMemo(function(){return(void 0!==_||"combobox"!==d)&&_},[_,d]),ec=s.useMemo(function(){return(0,C.w$)(M,er)},[JSON.stringify(M),er]),ev=(0,v.Z)("",{value:void 0!==w?w:I,postState:function(e){return e||""}}),es=(0,r.Z)(ev,2),ef=es[0],ed=es[1],ep=(0,g.Z)(U,q,ec,L,W),em=ep.valueOptions,eb=ep.labelOptions,eh=ep.options,eZ=s.useCallback(function(e){return(0,y.qo)(e).map(function(e){e&&"object"===(0,c.Z)(e)?(o=e.key,n=e.label,t=null!==(i=e.value)&&void 0!==i?i:o):t=e;var t,n,o,l,u,i,r,a=em.get(t);return a&&(void 0===n&&(n=null==a?void 0:a[W||ec.label]),void 0===o&&(o=null!==(r=null==a?void 0:a.key)&&void 0!==r?r:t),l=null==a?void 0:a.disabled,u=null==a?void 0:a.title),{label:n,value:t,key:o,disabled:l,title:u}})},[ec,W,em]),eS=(0,v.Z)(ee,{value:Y}),eg=(0,r.Z)(eS,2),eV=eg[0],ey=eg[1],eC=s.useMemo(function(){var e,t=eZ(ei&&null===eV?[]:eV);return"combobox"===d&&(0,y.oE)(null===(e=t[0])||void 0===e?void 0:e.value)?[]:t},[eV,eZ,d,ei]),ek=(0,h.Z)(eC,em),eO=(0,r.Z)(ek,2),ex=eO[0],eM=eO[1],eI=s.useMemo(function(){if(!d&&1===ex.length){var e=ex[0];if(null===e.value&&(null===e.label||void 0===e.label))return[]}return ex.map(function(e){var t;return(0,i.Z)((0,i.Z)({},e),{},{label:null!==(t="function"==typeof X?X(e):e.label)&&void 0!==t?t:e.value})})},[d,ex,X]),ew=s.useMemo(function(){return new Set(ex.map(function(e){return e.value}))},[ex]);s.useEffect(function(){if("combobox"===d){var e,t=null===(e=ex[0])||void 0===e?void 0:e.value;ed((0,y.Uh)(t)?String(t):"")}},[ex]);var eE=(0,V.Z)(function(e,t){var n=null!=t?t:e;return(0,u.Z)((0,u.Z)({},ec.value,e),ec.label,n)}),eA=s.useMemo(function(){if("tags"!==d)return eh;var e=(0,l.Z)(eh);return(0,l.Z)(ex).sort(function(e,t){return e.value<t.value?-1:1}).forEach(function(t){var n=t.value;em.has(n)||e.push(eE(n,t.label))}),e},[eE,eh,em,ex,d]),eD=(0,Z.Z)(eA,ec,ef,ea,L),eN=s.useMemo(function(){return"tags"!==d||!ef||eD.some(function(e){return e[L||"value"]===ef})||eD.some(function(e){return e[ec.value]===ef})?eD:[eE(ef)].concat((0,l.Z)(eD))},[eE,L,d,eD,ef,ec]),eP=s.useMemo(function(){return F?function e(t){return(0,l.Z)(t).sort(function(e,t){return F(e,t,{searchValue:ef})}).map(function(t){return Array.isArray(t.options)?(0,i.Z)((0,i.Z)({},t),{},{options:t.options.length>0?e(t.options):t.options}):t})}(eN):eN},[eN,F,ef]),eH=s.useMemo(function(){return(0,C.UO)(eP,{fieldNames:ec,childrenAsData:er})},[eP,ec,er]),eR=function(e){var t=eZ(e);if(ey(t),en&&(t.length!==ex.length||t.some(function(e,t){var n;return(null===(n=ex[t])||void 0===n?void 0:n.value)!==(null==e?void 0:e.value)}))){var n=et?t:t.map(function(e){return e.value}),o=t.map(function(e){return(0,C.tl)(eM(e.value))});en(ei?n:n[0],ei?o:o[0])}},e_=s.useState(null),eF=(0,r.Z)(e_,2),eL=eF[0],eW=eF[1],eU=s.useState(0),ej=(0,r.Z)(eU,2),eq=ej[0],eG=ej[1],eJ=void 0!==G?G:"combobox"!==d,e$=s.useCallback(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.source;eG(t),x&&"combobox"===d&&null!==e&&"keyboard"===(void 0===o?"keyboard":o)&&eW(String(e))},[x,d]),ez=function(e,t,n){var o=function(){var t,n=eM(e);return[et?{label:null==n?void 0:n[ec.label],value:e,key:null!==(t=null==n?void 0:n.key)&&void 0!==t?t:e}:e,(0,C.tl)(n)]};if(t&&N){var l=o(),u=(0,r.Z)(l,2);N(u[0],u[1])}else if(!t&&P&&"clear"!==n){var i=o(),a=(0,r.Z)(i,2);P(a[0],a[1])}},eB=(0,V.Z)(function(e,t){var n=!ei||t.selected;eR(n?ei?[].concat((0,l.Z)(ex),[e]):[e]:ex.filter(function(t){return t.value!==e})),ez(e,n),"combobox"===d?eW(""):(!f.E||D)&&(ed(""),eW(""))}),eK=s.useMemo(function(){var e=!1!==$&&!1!==R;return(0,i.Z)((0,i.Z)({},ep),{},{flattenOptions:eH,onActiveValue:e$,defaultActiveFirstOption:eJ,onSelect:eB,menuItemSelectedIcon:J,rawValues:ew,fieldNames:ec,virtual:e,direction:z,listHeight:K,listItemHeight:T,childrenAsData:er,maxCount:eo,optionRender:j})},[eo,ep,eH,e$,eJ,eB,J,ew,ec,$,R,z,K,T,er,j]);return s.createElement(b.Z.Provider,{value:eK},s.createElement(f.Z,(0,o.Z)({},el,{id:eu,prefixCls:void 0===p?"rc-select":p,ref:t,omitDomProps:O,mode:d,displayValues:eI,onDisplayValuesChange:function(e,t){eR(e);var n=t.type,o=t.values;("remove"===n||"clear"===n)&&o.forEach(function(e){ez(e.value,!1,n)})},direction:z,searchValue:ef,onSearch:function(e,t){if(ed(e),eW(null),"submit"===t.source){var n=(e||"").trim();n&&(eR(Array.from(new Set([].concat((0,l.Z)(ew),[n])))),ez(n,!0),ed(""));return}"blur"!==t.source&&("combobox"===d&&eR(e),null==E||E(e))},autoClearSearchValue:D,onSearchSplit:function(e){var t=e;"tags"!==d&&(t=e.map(function(e){var t=eb.get(e);return null==t?void 0:t.value}).filter(function(e){return void 0!==e}));var n=Array.from(new Set([].concat((0,l.Z)(ew),(0,l.Z)(t))));eR(n),n.forEach(function(e){ez(e,!0)})},dropdownMatchSelectWidth:R,OptionList:m.Z,emptyOptions:!eH.length,activeValue:eL,activeDescendantId:"".concat(eu,"_list_").concat(eq)})))});x.Option=p.Z,x.OptGroup=d.Z,t.Z=x}}]);