"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9711],{59711:function(e,t,r){r.d(t,{K:function(){return _}});var n=r(5853),i=r(83592),a=r(36628),o=r(46238),c=r(50499),s=r(36517),f=r(95266),l=r(48338),u=r(55484),p=r(86626),d=r(30696),v=r(92086),m=r(80960),g=r(83598),h=r(53299);function y(e,t,r){var i="".concat(t).concat(r),a=e.flavors.get(i);return a||e.flavors.set(i,a=e.clientOnly===t&&e.deferred===r?e:(0,n.pi)((0,n.pi)({},e),{clientOnly:t,deferred:r})),a}var _=function(){function e(e,t,r){this.cache=e,this.reader=t,this.fragments=r}return e.prototype.writeToStore=function(e,t){var r=this,o=t.query,c=t.result,u=t.dataId,p=t.variables,d=t.overwrite,m=(0,s.$H)(o),h=(0,g.ig)();p=(0,n.pi)((0,n.pi)({},(0,s.O4)(m)),p);var y=(0,n.pi)((0,n.pi)({store:e,written:Object.create(null),merge:function(e,t){return h.merge(e,t)},variables:p,varString:(0,f.B)(p)},(0,g.Is)(o,this.fragments)),{overwrite:!!d,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),_=this.processSelectionSet({result:c||Object.create(null),dataId:u,selectionSet:m.selectionSet,mergeTree:{map:new Map},context:y});if(!(0,l.Yk)(_))throw(0,i._K)(12,c);return y.incomingById.forEach(function(t,o){var c=t.storeObject,s=t.mergeTree,f=t.fieldNodeSet,u=(0,l.kQ)(o);if(s&&s.map.size){var p=r.applyMerges(s,u,c,y);if((0,l.Yk)(p))return;c=p}if(!1!==globalThis.__DEV__&&!y.overwrite){var d=Object.create(null);f.forEach(function(e){e.selectionSet&&(d[e.name.value]=!0)});var m=function(e){var t=s&&s.map.get(e);return!!(t&&t.info&&t.info.merge)};Object.keys(c).forEach(function(e){!0!==d[(0,g.E_)(e)]||m(e)||function(e,t,r,o){var c=function(e){var t=o.getFieldValue(e,r);return"object"==typeof t&&t},s=c(e);if(s){var f=c(t);if(!(!f||(0,l.Yk)(s)||(0,a.D)(s,f)||Object.keys(s).every(function(e){return void 0!==o.getFieldValue(f,e)}))){var u=o.getFieldValue(e,"__typename")||o.getFieldValue(t,"__typename"),p=(0,g.E_)(r),d="".concat(u,".").concat(p);if(!E.has(d)){E.add(d);var m=[];(0,v.k)(s)||(0,v.k)(f)||[s,f].forEach(function(e){var t=o.getFieldValue(e,"__typename");"string"!=typeof t||m.includes(t)||m.push(t)}),!1!==globalThis.__DEV__&&i.kG.warn(15,p,u,m.length?"either ensure all objects of type "+m.join(" and ")+" have an ID or a custom merge function, or ":"",d,(0,n.pi)({},s),(0,n.pi)({},f))}}}}(u,c,e,y.store)})}e.merge(o,c)}),e.retain(_.__ref),_},e.prototype.processSelectionSet=function(e){var t=this,r=e.dataId,a=e.result,o=e.selectionSet,c=e.context,s=e.mergeTree,f=this.cache.policies,p=Object.create(null),d=r&&f.rootTypenamesById[r]||(0,l.qw)(a,o,c.fragmentMap)||r&&c.store.get(r,"__typename");"string"==typeof d&&(p.__typename=d);var v=function(){var e=(0,h.y)(arguments,p,c.variables);if((0,l.Yk)(e.from)){var t=c.incomingById.get(e.from.__ref);if(t){var r=f.readField((0,n.pi)((0,n.pi)({},e),{from:t.storeObject}),c);if(void 0!==r)return r}}return f.readField(e,c)},m=new Set;this.flattenFields(o,a,c,d).forEach(function(e,r){var n,o=a[(0,l.u2)(r)];if(m.add(r),void 0!==o){var c=f.getStoreFieldName({typename:d,fieldName:r.name.value,field:r,variables:e.variables}),h=k(s,c),_=t.processFieldValue(o,r,r.selectionSet?y(e,!1,!1):e,h),b=void 0;r.selectionSet&&((0,l.Yk)(_)||(0,g.j)(_))&&(b=v("__typename",_));var S=f.getMergeFunction(d,r.name.value,b);S?h.info={field:r,typename:d,merge:S}:w(s,c),p=e.merge(p,((n={})[c]=_,n))}else!1===globalThis.__DEV__||e.clientOnly||e.deferred||u.Gw.added(r)||f.getReadFunction(d,r.name.value)||!1===globalThis.__DEV__||i.kG.error(13,(0,l.u2)(r),a)});try{var _=f.identify(a,{typename:d,selectionSet:o,fragmentMap:c.fragmentMap,storeObject:p,readField:v}),b=_[0],E=_[1];r=r||b,E&&(p=c.merge(p,E))}catch(e){if(!r)throw e}if("string"==typeof r){var O=(0,l.kQ)(r),F=c.written[r]||(c.written[r]=[]);if(F.indexOf(o)>=0||(F.push(o),this.reader&&this.reader.isFresh(a,O,o,c)))return O;var M=c.incomingById.get(r);return M?(M.storeObject=c.merge(M.storeObject,p),M.mergeTree=function e(t,r){if(t===r||!r||S(r))return t;if(!t||S(t))return r;var i=t.info&&r.info?(0,n.pi)((0,n.pi)({},t.info),r.info):t.info||r.info,a=t.map.size&&r.map.size,o={info:i,map:a?new Map:t.map.size?t.map:r.map};if(a){var c=new Set(r.map.keys());t.map.forEach(function(t,n){o.map.set(n,e(t,r.map.get(n))),c.delete(n)}),c.forEach(function(n){o.map.set(n,e(r.map.get(n),t.map.get(n)))})}return o}(M.mergeTree,s),m.forEach(function(e){return M.fieldNodeSet.add(e)})):c.incomingById.set(r,{storeObject:p,mergeTree:S(s)?void 0:s,fieldNodeSet:m}),O}return p},e.prototype.processFieldValue=function(e,t,r,n){var i=this;return t.selectionSet&&null!==e?(0,v.k)(e)?e.map(function(e,a){var o=i.processFieldValue(e,t,r,k(n,a));return w(n,a),o}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:n}):!1!==globalThis.__DEV__?(0,p.X)(e):e},e.prototype.flattenFields=function(e,t,r,n){void 0===n&&(n=(0,l.qw)(t,e,r.fragmentMap));var a=new Map,s=this.cache.policies,f=new o.B(!1);return function e(o,u){var p=f.lookup(o,u.clientOnly,u.deferred);p.visited||(p.visited=!0,o.selections.forEach(function(o){if((0,d.LZ)(o,r.variables)){var f=u.clientOnly,p=u.deferred;if(!(f&&p)&&(0,v.O)(o.directives)&&o.directives.forEach(function(e){var t=e.name.value;if("client"===t&&(f=!0),"defer"===t){var n=(0,l.NC)(e,r.variables);n&&!1===n.if||(p=!0)}}),(0,l.My)(o)){var g=a.get(o);g&&(f=f&&g.clientOnly,p=p&&g.deferred),a.set(o,y(r,f,p))}else{var h=(0,m.hi)(o,r.lookupFragment);if(!h&&o.kind===c.h.FRAGMENT_SPREAD)throw(0,i._K)(14,o.name.value);h&&s.fragmentMatches(h,n,t,r.variables)&&e(h.selectionSet,y(r,f,p))}}}))}(e,r),a},e.prototype.applyMerges=function(e,t,r,a,o){var c=this;if(e.map.size&&!(0,l.Yk)(r)){var s,f,u=!(0,v.k)(r)&&((0,l.Yk)(t)||(0,g.j)(t))?t:void 0,p=r;u&&!o&&(o=[(0,l.Yk)(u)?u.__ref:u]);var d=function(e,t){return(0,v.k)(e)?"number"==typeof t?e[t]:void 0:a.store.getFieldValue(e,String(t))};e.map.forEach(function(e,t){var r=d(u,t),n=d(p,t);if(void 0!==n){o&&o.push(t);var s=c.applyMerges(e,r,n,a,o);s!==n&&(f=f||new Map).set(t,s),o&&(0,i.kG)(o.pop()===t)}}),f&&(r=(0,v.k)(p)?p.slice(0):(0,n.pi)({},p),f.forEach(function(e,t){r[t]=e}))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,a,o&&(s=a.store).getStorage.apply(s,o)):r},e}(),b=[];function k(e,t){var r=e.map;return r.has(t)||r.set(t,b.pop()||{map:new Map}),r.get(t)}function S(e){return!e||!(e.info||e.map.size)}function w(e,t){var r=e.map,n=r.get(t);n&&S(n)&&(b.push(n),r.delete(t))}var E=new Set}}]);