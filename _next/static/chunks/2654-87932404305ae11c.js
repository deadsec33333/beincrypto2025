"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2654],{42654:function(e,t,r){r.d(t,{c:function(){return N}});var i=r(5853),o=r(83592),n=r(36628),a=r(97630),s=r(40373),u=r(30696),c=r(55484),l=r(80960),h=r(95266),f=r(56789),d=r(68428),p=r(92933),y=r(92086),v=r(36517),m=r(48338),b=r(23446),g=r(2232),Q=r(69090),k=r(49801),w=r(77828),O=r(45808),q=r(77473),I=r(97838),E=r(26592),P=r(46238),S=r(51874),R=r(26755),D=r(77878),_=r(95607),x=Object.prototype.hasOwnProperty,C=Object.create(null),N=function(){function e(e){var t=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new S.s(R.Q["queryManager.getDocumentInfo"]||2e3),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new P.B(!1),this.noCacheWarningsByQueryId=new Set;var r=new f.A(function(e){return t.cache.transformDocument(e)},{cache:!1});this.cache=e.cache,this.link=e.link,this.defaultOptions=e.defaultOptions,this.queryDeduplication=e.queryDeduplication,this.clientAwareness=e.clientAwareness,this.localState=e.localState,this.ssrMode=e.ssrMode,this.assumeImmutableResults=e.assumeImmutableResults,this.dataMasking=e.dataMasking;var i=e.documentTransform;this.documentTransform=i?r.concat(i).concat(r):r,this.defaultContext=e.defaultContext||Object.create(null),(this.onBroadcast=e.onBroadcast)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var e=this;this.queries.forEach(function(t,r){e.stopQueryNoBroadcast(r)}),this.cancelPendingFetches((0,o._K)(27))},e.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},e.prototype.mutate=function(e){return(0,i.mG)(this,arguments,void 0,function(e){var t,r,n,a,s,u,c,l=e.mutation,h=e.variables,f=e.optimisticResponse,y=e.updateQueries,v=e.refetchQueries,m=void 0===v?[]:v,b=e.awaitRefetchQueries,g=void 0!==b&&b,Q=e.update,k=e.onQueryUpdated,O=e.fetchPolicy,q=void 0===O?(null===(u=this.defaultOptions.mutate)||void 0===u?void 0:u.fetchPolicy)||"network-only":O,I=e.errorPolicy,E=void 0===I?(null===(c=this.defaultOptions.mutate)||void 0===c?void 0:c.errorPolicy)||"none":I,P=e.keepRootFields,S=e.context;return(0,i.Jh)(this,function(e){switch(e.label){case 0:if((0,o.kG)(l,28),(0,o.kG)("network-only"===q||"no-cache"===q,29),t=this.generateMutationId(),l=this.cache.transformForLink(this.transform(l)),r=this.getDocumentInfo(l).hasClientExports,h=this.getVariables(l,h),!r)return[3,2];return[4,this.localState.addExportedVariables(l,h,S)];case 1:h=e.sent(),e.label=2;case 2:return n=this.mutationStore&&(this.mutationStore[t]={mutation:l,variables:h,loading:!0,error:null}),a=f&&this.markMutationOptimistic(f,{mutationId:t,document:l,variables:h,fetchPolicy:q,errorPolicy:E,context:S,updateQueries:y,update:Q,keepRootFields:P}),this.broadcastQueries(),s=this,[2,new Promise(function(e,r){return(0,d.s)(s.getObservableFromLink(l,(0,i.pi)((0,i.pi)({},S),{optimisticResponse:a?f:void 0}),h,{},!1),function(e){if((0,p.d)(e)&&"none"===E)throw new w.cA({graphQLErrors:(0,p.K)(e)});n&&(n.loading=!1,n.error=null);var r=(0,i.pi)({},e);return"function"==typeof m&&(m=m(r)),"ignore"===E&&(0,p.d)(r)&&delete r.errors,s.markMutationResult({mutationId:t,result:r,document:l,variables:h,fetchPolicy:q,errorPolicy:E,context:S,update:Q,updateQueries:y,awaitRefetchQueries:g,refetchQueries:m,removeOptimistic:a?t:void 0,onQueryUpdated:k,keepRootFields:P})}).subscribe({next:function(r){s.broadcastQueries(),"hasNext"in r&&!1!==r.hasNext||e((0,i.pi)((0,i.pi)({},r),{data:s.maskOperation({document:l,data:r.data,fetchPolicy:q,id:t})}))},error:function(e){n&&(n.loading=!1,n.error=e),a&&s.cache.removeOptimistic(t),s.broadcastQueries(),r(e instanceof w.cA?e:new w.cA({networkError:e}))}})})]}})})},e.prototype.markMutationResult=function(e,t){var r=this;void 0===t&&(t=this.cache);var o=e.result,n=[],a="no-cache"===e.fetchPolicy;if(!a&&(0,I.c)(o,e.errorPolicy)){if((0,s.GG)(o)||n.push({result:o.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),(0,s.GG)(o)&&(0,y.O)(o.incremental)){var u=t.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),c=void 0;u.result&&(c=(0,s.mT)(u.result,o)),void 0!==c&&(o.data=c,n.push({result:c,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var l=e.updateQueries;l&&this.queries.forEach(function(e,i){var a=e.observableQuery,s=a&&a.queryName;if(s&&x.call(l,s)){var u=l[s],c=r.queries.get(i),h=c.document,f=c.variables,d=t.diff({query:h,variables:f,returnPartialData:!0,optimistic:!1}),p=d.result;if(d.complete&&p){var y=u(p,{mutationResult:o,queryName:h&&(0,v.rY)(h)||void 0,queryVariables:f});y&&n.push({result:y,dataId:"ROOT_QUERY",query:h,variables:f})}}})}if(n.length>0||(e.refetchQueries||"").length>0||e.update||e.onQueryUpdated||e.removeOptimistic){var h=[];if(this.refetchQueries({updateCache:function(t){a||n.forEach(function(e){return t.write(e)});var u=e.update,c=!(0,s.M0)(o)||(0,s.GG)(o)&&!o.hasNext;if(u){if(!a){var l=t.diff({id:"ROOT_MUTATION",query:r.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});l.complete&&("incremental"in(o=(0,i.pi)((0,i.pi)({},o),{data:l.result}))&&delete o.incremental,"hasNext"in o&&delete o.hasNext)}c&&u(t,o,{context:e.context,variables:e.variables})}a||e.keepRootFields||!c||t.modify({id:"ROOT_MUTATION",fields:function(e,t){var r=t.fieldName,i=t.DELETE;return"__typename"===r?e:i}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(e){return h.push(e)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(h).then(function(){return o})}return Promise.resolve(o)},e.prototype.markMutationOptimistic=function(e,t){var r=this,n="function"==typeof e?e(t.variables,{IGNORE:C}):e;return n!==C&&(this.cache.recordOptimisticTransaction(function(e){try{r.markMutationResult((0,i.pi)((0,i.pi)({},t),{result:{data:n}}),e)}catch(e){!1!==globalThis.__DEV__&&o.kG.error(e)}},t.mutationId),!0)},e.prototype.fetchQuery=function(e,t,r){return this.fetchConcastWithInfo(e,t,r).concast.promise},e.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,r){e[r]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},e.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},e.prototype.transform=function(e){return this.documentTransform.transformDocument(e)},e.prototype.getDocumentInfo=function(e){var t=this.transformCache;if(!t.has(e)){var r={hasClientExports:(0,u.mj)(e),hasForcedResolvers:this.localState.shouldForceResolvers(e),hasNonreactiveDirective:(0,u.FS)(["nonreactive"],e),nonReactiveQuery:(0,c.UU)(e),clientQuery:this.localState.clientQuery(e),serverQuery:(0,c.bi)([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"},{name:"unmask"}],e),defaultVars:(0,v.O4)((0,v.$H)(e)),asQuery:(0,i.pi)((0,i.pi)({},e),{definitions:e.definitions.map(function(e){return"OperationDefinition"===e.kind&&"query"!==e.operation?(0,i.pi)((0,i.pi)({},e),{operation:"query"}):e})})};t.set(e,r)}return t.get(e)},e.prototype.getVariables=function(e,t){return(0,i.pi)((0,i.pi)({},this.getDocumentInfo(e).defaultVars),t)},e.prototype.watchQuery=function(e){var t=this.transform(e.query);void 0===(e=(0,i.pi)((0,i.pi)({},e),{variables:this.getVariables(t,e.variables)})).notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var r=new I.e(this),o=new O.ue({queryManager:this,queryInfo:r,options:e});return o.lastQuery=t,this.queries.set(o.queryId,r),r.init({document:t,observableQuery:o,variables:o.variables}),o},e.prototype.query=function(e,t){var r=this;void 0===t&&(t=this.generateQueryId()),(0,o.kG)(e.query,30),(0,o.kG)("Document"===e.query.kind,31),(0,o.kG)(!e.returnPartialData,32),(0,o.kG)(!e.pollInterval,33);var n=this.transform(e.query);return this.fetchQuery(t,(0,i.pi)((0,i.pi)({},e),{query:n})).then(function(o){return o&&(0,i.pi)((0,i.pi)({},o),{data:r.maskOperation({document:n,data:o.data,fetchPolicy:e.fetchPolicy,id:t})})}).finally(function(){return r.stopQuery(t)})},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},e.prototype.clearStore=function(e){return void 0===e&&(e={discardWatches:!0}),this.cancelPendingFetches((0,o._K)(34)),this.queries.forEach(function(e){e.observableQuery?e.networkStatus=q.Ie.loading:e.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},e.prototype.getObservableQueries=function(e){var t=this;void 0===e&&(e="active");var r=new Map,n=new Map,a=new Map,s=new Set;return Array.isArray(e)&&e.forEach(function(e){if("string"==typeof e)n.set(e,e),a.set(e,!1);else if((0,m.JW)(e)){var r=(0,E.S)(t.transform(e));n.set(r,(0,v.rY)(e)),a.set(r,!1)}else(0,b.s)(e)&&e.query&&s.add(e)}),this.queries.forEach(function(t,i){var o=t.observableQuery,n=t.document;if(o){if("all"===e){r.set(i,o);return}var s=o.queryName;if("standby"===o.options.fetchPolicy||"active"===e&&!o.hasObservers())return;("active"===e||s&&a.has(s)||n&&a.has((0,E.S)(n)))&&(r.set(i,o),s&&a.set(s,!0),n&&a.set((0,E.S)(n),!0))}}),s.size&&s.forEach(function(e){var n=(0,g.X)("legacyOneTimeQuery"),a=t.getQuery(n).init({document:e.query,variables:e.variables}),s=new O.ue({queryManager:t,queryInfo:a,options:(0,i.pi)((0,i.pi)({},e),{fetchPolicy:"network-only"})});(0,o.kG)(s.queryId===n),a.setObservableQuery(s),r.set(n,s)}),!1!==globalThis.__DEV__&&a.size&&a.forEach(function(e,t){if(!e){var r=n.get(t);r?!1!==globalThis.__DEV__&&o.kG.warn(35,r):!1!==globalThis.__DEV__&&o.kG.warn(36)}}),r},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var r=[];return this.getObservableQueries(e?"all":"active").forEach(function(i,o){var n=i.options.fetchPolicy;i.resetLastResults(),(e||"standby"!==n&&"cache-only"!==n)&&r.push(i.refetch()),t.getQuery(o).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},e.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},e.prototype.startGraphQLSubscription=function(e){var t=this,r=e.query,i=e.variables,o=e.fetchPolicy,n=e.errorPolicy,a=void 0===n?"none":n,s=e.context,u=void 0===s?{}:s,c=e.extensions,l=void 0===c?{}:c;r=this.transform(r),i=this.getVariables(r,i);var h=function(e){return t.getObservableFromLink(r,u,e,l).map(function(i){"no-cache"!==o&&((0,I.c)(i,a)&&t.cache.write({query:r,result:i.data,dataId:"ROOT_SUBSCRIPTION",variables:e}),t.broadcastQueries());var n=(0,p.d)(i),s=(0,w.ls)(i);if(n||s){var u={};if(n&&(u.graphQLErrors=i.errors),s&&(u.protocolErrors=i.extensions[w.YG]),"none"===a||s)throw new w.cA(u)}return"ignore"===a&&delete i.errors,i})};if(this.getDocumentInfo(r).hasClientExports){var f=this.localState.addExportedVariables(r,i,u).then(h);return new Q.y(function(e){var t=null;return f.then(function(r){return t=r.subscribe(e)},e.error),function(){return t&&t.unsubscribe()}})}return h(i)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,r,o,n){var s,u,c=this;void 0===n&&(n=null!==(s=null==t?void 0:t.queryDeduplication)&&void 0!==s?s:this.queryDeduplication);var l=this.getDocumentInfo(e),f=l.serverQuery,p=l.clientQuery;if(f){var y=this.inFlightLinkObservables,m=this.link,b={query:f,variables:r,operationName:(0,v.rY)(f)||void 0,context:this.prepareContext((0,i.pi)((0,i.pi)({},t),{forceFetch:!n})),extensions:o};if(t=b.context,n){var g=(0,E.S)(f),w=(0,h.B)(r),O=y.lookup(g,w);if(!(u=O.observable)){var q=new k.X([(0,a.h)(m,b)]);u=O.observable=q,q.beforeNext(function(){y.remove(g,w)})}}else u=new k.X([(0,a.h)(m,b)])}else u=new k.X([Q.y.of({data:{}})]),t=this.prepareContext(t);return p&&(u=(0,d.s)(u,function(e){return c.localState.runResolvers({document:p,remoteResult:e,context:t,variables:r})})),u},e.prototype.getResultsFromLink=function(e,t,r){var i=e.lastRequestId=this.generateRequestId(),o=this.cache.transformForLink(r.query);return(0,d.s)(this.getObservableFromLink(o,r.context,r.variables),function(n){var a=(0,p.K)(n),s=a.length>0,u=r.errorPolicy;if(i>=e.lastRequestId){if(s&&"none"===u)throw e.markError(new w.cA({graphQLErrors:a}));e.markResult(n,o,r,t),e.markReady()}var c={data:n.data,loading:!1,networkStatus:q.Ie.ready};return s&&"none"===u&&(c.data=void 0),s&&"ignore"!==u&&(c.errors=a,c.networkStatus=q.Ie.error),c},function(t){var r=(0,w.MS)(t)?t:new w.cA({networkError:t});throw i>=e.lastRequestId&&e.markError(r),r})},e.prototype.fetchConcastWithInfo=function(e,t,r,i){var o,n,a=this;void 0===r&&(r=q.Ie.loading),void 0===i&&(i=t.query);var s=this.getVariables(i,t.variables),u=this.getQuery(e),c=this.defaultOptions.watchQuery,l=t.fetchPolicy,h=void 0===l?c&&c.fetchPolicy||"cache-first":l,f=t.errorPolicy,d=void 0===f?c&&c.errorPolicy||"none":f,p=t.returnPartialData,y=t.notifyOnNetworkStatusChange,v=t.context,m=Object.assign({},t,{query:i,variables:s,fetchPolicy:h,errorPolicy:d,returnPartialData:void 0!==p&&p,notifyOnNetworkStatusChange:void 0!==y&&y,context:void 0===v?{}:v}),b=function(e){m.variables=e;var i=a.fetchQueryByPolicy(u,m,r);return"standby"!==m.fetchPolicy&&i.sources.length>0&&u.observableQuery&&u.observableQuery.applyNextFetchPolicy("after-fetch",t),i},g=function(){return a.fetchCancelFns.delete(e)};if(this.fetchCancelFns.set(e,function(e){g(),setTimeout(function(){return o.cancel(e)})}),this.getDocumentInfo(m.query).hasClientExports)o=new k.X(this.localState.addExportedVariables(m.query,m.variables,m.context).then(b).then(function(e){return e.sources})),n=!0;else{var Q=b(m.variables);n=Q.fromLink,o=new k.X(Q.sources)}return o.promise.then(g,g),{concast:o,fromLink:n}},e.prototype.refetchQueries=function(e){var t=this,r=e.updateCache,i=e.include,o=e.optimistic,n=void 0!==o&&o,a=e.removeOptimistic,s=void 0===a?n?(0,g.X)("refetchQueries"):void 0:a,u=e.onQueryUpdated,c=new Map;i&&this.getObservableQueries(i).forEach(function(e,r){c.set(r,{oq:e,lastDiff:t.getQuery(r).getDiff()})});var l=new Map;return r&&this.cache.batch({update:r,optimistic:n&&s||!1,removeOptimistic:s,onWatchUpdated:function(e,t,r){var i=e.watcher instanceof I.e&&e.watcher.observableQuery;if(i){if(u){c.delete(i.queryId);var o=u(i,t,r);return!0===o&&(o=i.refetch()),!1!==o&&l.set(i,o),o}null!==u&&c.set(i.queryId,{oq:i,lastDiff:r,diff:t})}}}),c.size&&c.forEach(function(e,r){var i,o=e.oq,n=e.lastDiff,a=e.diff;if(u){if(!a){var s=o.queryInfo;s.reset(),a=s.getDiff()}i=u(o,a,n)}u&&!0!==i||(i=o.refetch()),!1!==i&&l.set(o,i),r.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(r)}),s&&this.cache.removeOptimistic(s),l},e.prototype.maskOperation=function(e){var t,r,i,n=e.document,a=e.data;if(!1!==globalThis.__DEV__){var s=e.fetchPolicy,u=e.id,c=null===(t=(0,v.$H)(n))||void 0===t?void 0:t.operation,h=(null!==(r=null==c?void 0:c[0])&&void 0!==r?r:"o")+u;!this.dataMasking||"no-cache"!==s||(0,l.YU)(n)||this.noCacheWarningsByQueryId.has(h)||(this.noCacheWarningsByQueryId.add(h),!1!==globalThis.__DEV__&&o.kG.warn(37,null!==(i=(0,v.rY)(n))&&void 0!==i?i:"Unnamed ".concat(null!=c?c:"operation")))}return this.dataMasking?(0,D.l)(a,n,this.cache):a},e.prototype.maskFragment=function(e){var t=e.data,r=e.fragment,i=e.fragmentName;return this.dataMasking?(0,_.r)(t,r,this.cache,i):t},e.prototype.fetchQueryByPolicy=function(e,t,r){var o=this,a=t.query,s=t.variables,u=t.fetchPolicy,c=t.refetchWritePolicy,l=t.errorPolicy,h=t.returnPartialData,f=t.context,d=t.notifyOnNetworkStatusChange,p=e.networkStatus;e.init({document:a,variables:s,networkStatus:r});var y=function(){return e.getDiff()},v=function(t,r){void 0===r&&(r=e.networkStatus||q.Ie.loading);var u=t.result;!1===globalThis.__DEV__||h||(0,n.D)(u,{})||(0,O.DC)(t.missing);var c=function(e){return Q.y.of((0,i.pi)({data:e,loading:(0,q.Oj)(r),networkStatus:r},t.complete?null:{partial:!0}))};return u&&o.getDocumentInfo(a).hasForcedResolvers?o.localState.runResolvers({document:a,remoteResult:{data:u},context:f,variables:s,onlyRunForcedResolvers:!0}).then(function(e){return c(e.data||void 0)}):"none"===l&&r===q.Ie.refetch&&Array.isArray(t.missing)?c(void 0):c(u)},m="no-cache"===u?0:r===q.Ie.refetch&&"merge"!==c?1:2,b=function(){return o.getResultsFromLink(e,m,{query:a,variables:s,context:f,fetchPolicy:u,errorPolicy:l})},g=d&&"number"==typeof p&&p!==r&&(0,q.Oj)(r);switch(u){default:case"cache-first":var k=y();if(k.complete)return{fromLink:!1,sources:[v(k,e.markReady())]};if(h||g)return{fromLink:!0,sources:[v(k),b()]};return{fromLink:!0,sources:[b()]};case"cache-and-network":var k=y();if(k.complete||h||g)return{fromLink:!0,sources:[v(k),b()]};return{fromLink:!0,sources:[b()]};case"cache-only":return{fromLink:!1,sources:[v(y(),e.markReady())]};case"network-only":if(g)return{fromLink:!0,sources:[v(y()),b()]};return{fromLink:!0,sources:[b()]};case"no-cache":if(g)return{fromLink:!0,sources:[v(e.getDiff()),b()]};return{fromLink:!0,sources:[b()]};case"standby":return{fromLink:!1,sources:[]}}},e.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new I.e(this,e)),this.queries.get(e)},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return(0,i.pi)((0,i.pi)((0,i.pi)({},this.defaultContext),t),{clientAwareness:this.clientAwareness})},e}()}}]);