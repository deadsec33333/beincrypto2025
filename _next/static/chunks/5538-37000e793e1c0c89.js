"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5538],{25538:function(t,e,r){r.d(e,{HL:function(){return b},cf:function(){return k},ur:function(){return R}});var i,o,n=r(5853),a=r(83592),s=r(44483),c=r(36628),u=r(46238),f=r(82187),p=r(48338),h=r(71269),d=r(23446),l=r(59394),y=r(83598),g=Object.create(null),_=function(){return g},v=Object.create(null),k=function(){function t(t,e){var r=this;this.policies=t,this.group=e,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(t,e){return(0,f.J)((0,p.Yk)(t)?r.get(t.__ref,e):t&&t[e])},this.canRead=function(t){return(0,p.Yk)(t)?r.has(t.__ref):"object"==typeof t},this.toReference=function(t,e){if("string"==typeof t)return(0,p.kQ)(t);if((0,p.Yk)(t))return t;var i=r.policies.identify(t)[0];if(i){var o=(0,p.kQ)(i);return e&&r.merge(i,t),o}}}return t.prototype.toObject=function(){return(0,n.pi)({},this.data)},t.prototype.has=function(t){return void 0!==this.lookup(t,!0)},t.prototype.get=function(t,e){if(this.group.depend(t,e),y.RI.call(this.data,t)){var r=this.data[t];if(r&&y.RI.call(r,e))return r[e]}return"__typename"===e&&y.RI.call(this.policies.rootTypenamesById,t)?this.policies.rootTypenamesById[t]:this instanceof I?this.parent.get(t,e):void 0},t.prototype.lookup=function(t,e){return(e&&this.group.depend(t,"__exists"),y.RI.call(this.data,t))?this.data[t]:this instanceof I?this.parent.lookup(t,e):this.policies.rootTypenamesById[t]?Object.create(null):void 0},t.prototype.merge=function(t,e){var r,i=this;(0,p.Yk)(t)&&(t=t.__ref),(0,p.Yk)(e)&&(e=e.__ref);var o="string"==typeof t?this.lookup(r=t):t,n="string"==typeof e?this.lookup(r=e):e;if(n){(0,a.kG)("string"==typeof r,2);var s=new h.w0(j).merge(o,n);if(this.data[r]=s,s!==o&&(delete this.refs[r],this.group.caching)){var c=Object.create(null);o||(c.__exists=1),Object.keys(n).forEach(function(t){if(!o||o[t]!==s[t]){c[t]=1;var e=(0,y.E_)(t);e===t||i.policies.hasKeyArgs(s.__typename,e)||(c[e]=1),void 0!==s[t]||i instanceof I||delete s[t]}}),c.__typename&&!(o&&o.__typename)&&this.policies.rootTypenamesById[r]===s.__typename&&delete c.__typename,Object.keys(c).forEach(function(t){return i.group.dirty(r,t)})}}},t.prototype.modify=function(t,e){var r=this,i=this.lookup(t);if(i){var o=Object.create(null),s=!1,c=!0,u={DELETE:g,INVALIDATE:v,isReference:p.Yk,toReference:this.toReference,canRead:this.canRead,readField:function(e,i){return r.policies.readField("string"==typeof e?{fieldName:e,from:i||(0,p.kQ)(t)}:e,{store:r})}};if(Object.keys(i).forEach(function(h){var d=(0,y.E_)(h),l=i[h];if(void 0!==l){var k="function"==typeof e?e:e[h]||e[d];if(k){var m=k===_?g:k((0,f.J)(l),(0,n.pi)((0,n.pi)({},u),{fieldName:d,storeFieldName:h,storage:r.getStorage(t,h)}));if(m===v)r.group.dirty(t,h);else if(m===g&&(m=void 0),m!==l&&(o[h]=m,s=!0,l=m,!1!==globalThis.__DEV__)){var b=function(t){if(void 0===r.lookup(t.__ref))return!1!==globalThis.__DEV__&&a.kG.warn(3,t),!0};if((0,p.Yk)(m))b(m);else if(Array.isArray(m))for(var I=!1,E=void 0,j=0,R=m;j<R.length;j++){var O=R[j];if((0,p.Yk)(O)){if(I=!0,b(O))break}else"object"==typeof O&&O&&r.policies.identify(O)[0]&&(E=O);if(I&&void 0!==E){!1!==globalThis.__DEV__&&a.kG.warn(4,E);break}}}}void 0!==l&&(c=!1)}}),s)return this.merge(t,o),c&&(this instanceof I?this.data[t]=void 0:delete this.data[t],this.group.dirty(t,"__exists")),!0}return!1},t.prototype.delete=function(t,e,r){var i,o=this.lookup(t);if(o){var n=this.getFieldValue(o,"__typename"),a=e&&r?this.policies.getStoreFieldName({typename:n,fieldName:e,args:r}):e;return this.modify(t,a?((i={})[a]=_,i):_)}return!1},t.prototype.evict=function(t,e){var r=!1;return t.id&&(y.RI.call(this.data,t.id)&&(r=this.delete(t.id,t.fieldName,t.args)),this instanceof I&&this!==e&&(r=this.parent.evict(t,e)||r),(t.fieldName||r)&&this.group.dirty(t.id,t.fieldName||"__exists")),r},t.prototype.clear=function(){this.replace(null)},t.prototype.extract=function(){var t=this,e=this.toObject(),r=[];return this.getRootIdSet().forEach(function(e){y.RI.call(t.policies.rootTypenamesById,e)||r.push(e)}),r.length&&(e.__META={extraRootIds:r.sort()}),e},t.prototype.replace=function(t){var e=this;if(Object.keys(this.data).forEach(function(r){t&&y.RI.call(t,r)||e.delete(r)}),t){var r=t.__META,i=(0,n._T)(t,["__META"]);Object.keys(i).forEach(function(t){e.merge(t,i[t])}),r&&r.extraRootIds.forEach(this.retain,this)}},t.prototype.retain=function(t){return this.rootIds[t]=(this.rootIds[t]||0)+1},t.prototype.release=function(t){if(this.rootIds[t]>0){var e=--this.rootIds[t];return e||delete this.rootIds[t],e}return 0},t.prototype.getRootIdSet=function(t){return void 0===t&&(t=new Set),Object.keys(this.rootIds).forEach(t.add,t),this instanceof I?this.parent.getRootIdSet(t):Object.keys(this.policies.rootTypenamesById).forEach(t.add,t),t},t.prototype.gc=function(){var t=this,e=this.getRootIdSet(),r=this.toObject();e.forEach(function(i){y.RI.call(r,i)&&(Object.keys(t.findChildRefIds(i)).forEach(e.add,e),delete r[i])});var i=Object.keys(r);if(i.length){for(var o=this;o instanceof I;)o=o.parent;i.forEach(function(t){return o.delete(t)})}return i},t.prototype.findChildRefIds=function(t){if(!y.RI.call(this.refs,t)){var e=this.refs[t]=Object.create(null),r=this.data[t];if(!r)return e;var i=new Set([r]);i.forEach(function(t){(0,p.Yk)(t)&&(e[t.__ref]=!0),(0,d.s)(t)&&Object.keys(t).forEach(function(e){var r=t[e];(0,d.s)(r)&&i.add(r)})})}return this.refs[t]},t.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},t}(),m=function(){function t(t,e){void 0===e&&(e=null),this.caching=t,this.parent=e,this.d=null,this.resetCaching()}return t.prototype.resetCaching=function(){this.d=this.caching?(0,s.dP)():null,this.keyMaker=new u.B(l.mr)},t.prototype.depend=function(t,e){if(this.d){this.d(e+"#"+t);var r=(0,y.E_)(e);r!==e&&this.d(r+"#"+t),this.parent&&this.parent.depend(t,e)}},t.prototype.dirty=function(t,e){this.d&&this.d.dirty(e+"#"+t,"__exists"===e?"forget":"setDirty")},t}();function b(t,e){R(t)&&t.group.depend(e,"__exists")}o=function(t){function e(e){var r=e.policies,i=e.resultCaching,o=e.seed,n=t.call(this,r,new m(void 0===i||i))||this;return n.stump=new E(n),n.storageTrie=new u.B(l.mr),o&&n.replace(o),n}return(0,n.ZT)(e,t),e.prototype.addLayer=function(t,e){return this.stump.addLayer(t,e)},e.prototype.removeLayer=function(){return this},e.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},e}(i=k||(k={})),i.Root=o;var I=function(t){function e(e,r,i,o){var n=t.call(this,r.policies,o)||this;return n.id=e,n.parent=r,n.replay=i,n.group=o,i(n),n}return(0,n.ZT)(e,t),e.prototype.addLayer=function(t,r){return new e(t,this,r,this.group)},e.prototype.removeLayer=function(t){var e=this,r=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(t){var i=e.data[t],o=r.lookup(t);o?i?i!==o&&Object.keys(i).forEach(function(r){(0,c.D)(i[r],o[r])||e.group.dirty(t,r)}):(e.group.dirty(t,"__exists"),Object.keys(o).forEach(function(r){e.group.dirty(t,r)})):e.delete(t)}),r):r===this.parent?this:r.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return(0,n.pi)((0,n.pi)({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(e){var r=this.parent.findChildRefIds(e);return y.RI.call(this.data,e)?(0,n.pi)((0,n.pi)({},r),t.prototype.findChildRefIds.call(this,e)):r},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(k),E=function(t){function e(e){return t.call(this,"EntityStore.Stump",e,function(){},new m(e.group.caching,e.group))||this}return(0,n.ZT)(e,t),e.prototype.removeLayer=function(){return this},e.prototype.merge=function(t,e){return this.parent.merge(t,e)},e}(I);function j(t,e,r){var i=t[r],o=e[r];return(0,c.D)(i,o)?i:o}function R(t){return!!(t instanceof k&&t.group.caching)}}}]);