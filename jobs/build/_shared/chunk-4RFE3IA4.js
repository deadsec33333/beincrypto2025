import{a as c}from"/jobs/build/_shared/chunk-ZCIWUJSN.js";import{f as h,i as F,k as n}from"/jobs/build/_shared/chunk-OTKXJQRY.js";n();var t=h(F());function w(v){let{strapiUrlBase:a,authToken:s,userId:e}=v,{favorites:i,addToFavorites:f,removeFromFavorites:d}=(0,t.useContext)(c),u=(0,t.useCallback)(async o=>{if(e)try{let r=await fetch(`${a}/favorites`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({data:{user:e,job:o}})});if(r.ok)f(o);else throw new Error(`Error adding favorite! status: ${r.status}`);await r.json()}catch(r){console.error("Error adding favorite",r)}},[e]),m=(0,t.useCallback)(async o=>{if(e)try{let r=await fetch(`${a}/favorites/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(r.ok)d(o);else throw new Error(`Error removing favorite! status: ${r.status}`);await r.json()}catch(r){console.error("Error removing favorite",r)}},[e]);return{favorites:i,addToFavorites:u,removeFromFavorites:m,isInFavorites:o=>i.includes(o)}}export{w as a};
